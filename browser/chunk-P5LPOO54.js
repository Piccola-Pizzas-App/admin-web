import{a as g}from"./chunk-5ZJROBAP.js";import{a as y,b as m,c as P,d as E,i as T,j as S,l as C,m as h,t as x,v as D}from"./chunk-NOBA6HXV.js";import"./chunk-55JEHFV6.js";import"./chunk-2L4G3X5X.js";import{$a as s,Hb as i,Ib as e,Jb as o,Pb as u,Tc as v,_b as r,da as c,gc as b,ha as f,xb as p}from"./chunk-H3XUDRPM.js";import"./chunk-RGL3W33T.js";var O=(()=>{let l=class l{constructor(){this.localTypesAllowed=["PIZZA","PANINI","SANDWICH","HAMBURGUESA","BAGUETTE","COMPARTIR","ENSALADA","TACO","BEBIDA"],this.fb=c(x),this.localsService=c(g),this.fieldsLocked=!0}ngOnInit(){this.localForm=this.fb.group({deliveryPrice:[{value:1.5,disabled:!0}],extraPrice:[{value:1,disabled:!0}],freeShipping:[{value:50,disabled:!0}],timePerProduct:[2.5,m.required],deliveryTime:[{value:10,disabled:!0}],minDeliveryTime:[30,m.required],firstDeliver:["21:02",m.required],localType:[{value:"PIZZA,PANINI,SANDWICH,HAMBURGUESA,BAGUETTE,COMPARTIR,ENSALADA,TACO,BEBIDA",disabled:!0}],unlockPassword:[""]}),this.localsService.getOneLocal().subscribe(t=>{this.localForm.patchValue({deliveryPrice:t.deliveryPrice,extraPrice:t.extraPrice,freeShipping:t.freeShipping,timePerProduct:t.timePerProduct,deliveryTime:t.deliveryTime,minDeliveryTime:t.minDeliveryTime,firstDeliver:t.firstDeliver,localType:t.localType.join(",")})})}unlockFields(){let t=this.localForm.get("unlockPassword")?.value;console.log(t),t==="12345"?(this.fieldsLocked=!1,this.localForm.get("deliveryPrice")?.enable(),this.localForm.get("extraPrice")?.enable(),this.localForm.get("freeShipping")?.enable(),this.localForm.get("deliveryTime")?.enable(),this.localForm.get("localType")?.enable(),alert("Campos desbloqueados.")):alert("Contrase\xF1a incorrecta.")}onSubmit(){if(this.localForm.valid){let t=this.localForm.getRawValue();delete t.unlockPassword,t.localType&&(t.localType=t.localType.split(",").map(n=>n.trim())),this.localsService.updateLocal(t).subscribe({next:()=>alert("Datos actualizados correctamente."),error:n=>alert("Error al actualizar los datos.")})}}};l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=f({type:l,selectors:[["app-config"]],standalone:!0,features:[b],decls:46,vars:2,consts:[[1,"config-wrapper"],[1,"edit-local-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","unlockPassword"],["type","password","id","unlockPassword","formControlName","unlockPassword",1,"form-control"],["type","button",1,"btn","btn-secondary",3,"click"],["for","deliveryPrice"],["type","number","id","deliveryPrice","formControlName","deliveryPrice",1,"form-control"],["for","extraPrice"],["type","number","id","extraPrice","formControlName","extraPrice",1,"form-control"],["for","freeShipping"],["type","number","id","freeShipping","formControlName","freeShipping",1,"form-control"],["for","timePerProduct"],["type","number","id","timePerProduct","formControlName","timePerProduct",1,"form-control"],["for","deliveryTime"],["type","number","id","deliveryTime","formControlName","deliveryTime",1,"form-control"],["for","minDeliveryTime"],["type","number","id","minDeliveryTime","formControlName","minDeliveryTime",1,"form-control"],["for","firstDeliver"],["type","time","id","firstDeliver","formControlName","firstDeliver",1,"form-control"],["for","localType"],["type","text","id","localType","formControlName","localType",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(n,a){n&1&&(i(0,"div",0)(1,"h1"),r(2,"Configuraci\xF3n"),e(),o(3,"hr"),i(4,"div",1)(5,"form",2),u("ngSubmit",function(){return a.onSubmit()}),i(6,"div",3)(7,"label",4),r(8,"Introduce la contrase\xF1a para desbloquear los campos"),e(),o(9,"input",5),i(10,"button",6),u("click",function(){return a.unlockFields()}),r(11," Desbloquear Campos "),e()(),i(12,"div",3)(13,"label",7),r(14,"Precio de Entrega"),e(),o(15,"input",8),e(),i(16,"div",3)(17,"label",9),r(18,"Precio Extra"),e(),o(19,"input",10),e(),i(20,"div",3)(21,"label",11),r(22,"Env\xEDo Gratuito desde"),e(),o(23,"input",12),e(),i(24,"div",3)(25,"label",13),r(26,"Tiempo por Producto (min)"),e(),o(27,"input",14),e(),i(28,"div",3)(29,"label",15),r(30,"Tiempo de Entrega"),e(),o(31,"input",16),e(),i(32,"div",3)(33,"label",17),r(34,"Tiempo M\xEDnimo de Entrega"),e(),o(35,"input",18),e(),i(36,"div",3)(37,"label",19),r(38,"Primera Entrega del D\xEDa"),e(),o(39,"input",20),e(),i(40,"div",3)(41,"label",21),r(42,"Tipo de Local (separado por comas)"),e(),o(43,"input",22),e(),i(44,"button",23),r(45," Guardar Cambios "),e()()()()),n&2&&(s(5),p("formGroup",a.localForm),s(39),p("disabled",a.localForm.invalid))},dependencies:[D,T,y,S,P,E,C,h,v],styles:[".config-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:20px 10px;border-radius:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}input[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ccc}button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background-color:#4caf50;color:#fff;border-radius:5px;cursor:pointer}#unlockPassword[_ngcontent-%COMP%]{margin-bottom:12px}"]});let d=l;return d})();export{O as ConfigComponent};
