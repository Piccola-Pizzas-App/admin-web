import{a as w}from"./chunk-BGJFWWJX.js";import{a as M,b as n,c as S,d as E,i as D,j as O,l as P,m as _,n as F,o as y,p as N,q,r as A,s as V,t as I,v as R}from"./chunk-NOBA6HXV.js";import"./chunk-55JEHFV6.js";import{f as C,h as v}from"./chunk-I46D7BUH.js";import"./chunk-2L4G3X5X.js";import{$a as u,$b as g,Hb as t,Ib as e,Jb as s,Pb as f,Tc as x,_b as i,ac as b,da as d,gc as h,ha as l,xb as p}from"./chunk-H3XUDRPM.js";import"./chunk-RGL3W33T.js";var H=(()=>{let o=class o{constructor(){this.discountsService=d(w),this.router=d(v),this.route=d(C),this.fb=d(I),this.isEditMode=!1}ngOnInit(){this.route.params.subscribe(r=>{this.discountId=r.id,this.isEditMode=!!this.discountId,this.initializeForm(),this.isEditMode&&this.discountsService.getDiscountById(this.discountId).subscribe(a=>{this.discountForm.patchValue(a)})})}initializeForm(){this.discountForm=this.fb.group({code:["",n.required],value:[null,[n.required,n.min(0),n.max(100)]],type:["",n.required],remaining:[null,[n.required,n.min(0)]],expiresAt:["",n.required]})}onSubmit(){if(this.discountForm.invalid)return;let r=this.discountForm.value;this.isEditMode?this.discountsService.updateDiscount(this.discountId,r).subscribe(()=>{alert("Descuento actualizado con \xE9xito"),this.router.navigate(["/promos"])}):this.discountsService.createDiscount(r).subscribe(()=>{alert("Descuento creado con \xE9xito"),this.router.navigate(["/promos"])})}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=l({type:o,selectors:[["app-discount-form"]],standalone:!0,features:[h],decls:32,vars:3,consts:[[1,"discount-form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","code"],["id","code","formControlName","code","type","text","placeholder","C\xF3digo del Descuento","required",""],["for","value"],["id","value","formControlName","value","type","number","min","0","max","100","step","0.01","placeholder","Valor del Descuento","required",""],["for","type"],["id","type","formControlName","type","required",""],["value",""],["value","PERCENTAGE"],["value","QUANTITY"],["for","remaining"],["id","remaining","formControlName","remaining","type","number","min","0","step","1","placeholder","Descuento Restante","required",""],["for","expiresAt"],["id","expiresAt","formControlName","expiresAt","type","date","required",""],["type","submit",1,"btn","btn-primary"]],template:function(a,c){a&1&&(t(0,"div",0)(1,"h1"),i(2),e(),t(3,"form",1),f("ngSubmit",function(){return c.onSubmit()}),t(4,"div",2)(5,"label",3),i(6,"C\xF3digo del Descuento:"),e(),s(7,"input",4),e(),t(8,"div",2)(9,"label",5),i(10,"Valor del Descuento:"),e(),s(11,"input",6),e(),t(12,"div",2)(13,"label",7),i(14,"Tipo de Descuento:"),e(),t(15,"select",8)(16,"option",9),i(17,"Selecciona un tipo"),e(),t(18,"option",10),i(19,"Porcentaje"),e(),t(20,"option",11),i(21,"Cantidad"),e()()(),t(22,"div",2)(23,"label",12),i(24,"Restante:"),e(),s(25,"input",13),e(),t(26,"div",2)(27,"label",14),i(28,"Fecha de Expiraci\xF3n:"),e(),s(29,"input",15),e(),t(30,"button",16),i(31),e()()()),a&2&&(u(2),g(c.isEditMode?"Editar Descuento":"Crear Descuento"),u(),p("formGroup",c.discountForm),u(28),b(" ",c.isEditMode?"Actualizar Descuento":"Crear Descuento"," "))},dependencies:[R,D,y,N,M,O,F,S,E,V,A,q,P,_,x],styles:[".discount-form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a}.discount-form-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.discount-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.discount-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.discount-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .discount-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.discount-form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px}.discount-form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let m=o;return m})();export{H as PromoFormComponent};
